{% extends "base.html" %} {% block title %}Article Library - Web Scraper{%
endblock %} {% block extra_css %}
<link
    rel="stylesheet"
    href="{{ url_for('static', filename='css/grid.css') }}"
/>
<link
    rel="stylesheet"
    href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css"
/>
{% endblock %} {% block content %}
<div class="navbar">
    <div class="navbar-container">
        <h1 class="navbar-brand">
            <i class="fas fa-book"></i> Article Library
        </h1>
        <nav class="nav-links">
            <a href="/"><i class="fas fa-arrow-left"></i> Back to Scraper</a>
            <a href="/grid"><i class="fas fa-sync-alt"></i> Refresh</a>
        </nav>
    </div>
</div>

<div class="container">
    <!-- Header with stats and actions -->
    <div class="header">
        <div>
            <h1><i class="fas fa-book-open"></i> Your Articles</h1>
        </div>
        <div class="header-stats">
            <div class="stat-badge">
                <i class="fas fa-newspaper"></i> Total
                <span id="totalCount">0</span>
            </div>
            <div class="stat-badge">
                <i class="fas fa-pen-fancy"></i> Authors
                <span id="authorCount">0</span>
            </div>
        </div>
        <div class="action-buttons">
            <a href="/" class="btn btn-primary"
                ><i class="fas fa-search"></i> Scrape More</a
            >
            <button id="clearAllBtn" class="btn btn-secondary">
                <i class="fas fa-trash-alt"></i> Clear All
            </button>
        </div>
    </div>

    <!-- Filter section -->
    <div class="search-box">
        <!-- Multiple Filters Section -->
        <div class="filters-section">
            <div class="filters-container">
                <!-- Author Filter (Text Input) -->
                <div class="filter-group">
                    <label for="authorInput" class="filter-label">
                        <i class="fas fa-pen-fancy"></i> Author
                    </label>
                    <input
                        type="text"
                        id="authorInput"
                        class="filter-input"
                        placeholder="Type author name..."
                    />
                </div>

                <!-- Date Range Filter -->
                <div class="filter-group">
                    <label for="dateFromInput" class="filter-label">
                        <i class="fas fa-calendar-alt"></i> Date From
                    </label>
                    <input
                        type="date"
                        id="dateFromInput"
                        class="filter-input"
                    />
                </div>

                <div class="filter-group">
                    <label for="dateToInput" class="filter-label">
                        <i class="fas fa-calendar-alt"></i> Date To
                    </label>
                    <input type="date" id="dateToInput" class="filter-input" />
                </div>

                <!-- Website Filter (Text Input) -->
                <div class="filter-group">
                    <label for="websiteInput" class="filter-label">
                        <i class="fas fa-globe"></i> Website
                    </label>
                    <input
                        type="text"
                        id="websiteInput"
                        class="filter-input"
                        placeholder="Type website URL..."
                    />
                </div>

                <!-- Pagination Selector -->
                <div class="filter-group">
                    <label for="perPageSelector" class="filter-label">
                        <i class="fas fa-list"></i> Per Page
                    </label>
                    <select id="perPageSelector" class="filter-select">
                        <option value="5">5 Items</option>
                        <option value="10" selected>10 Items</option>
                        <option value="20">20 Items</option>
                    </select>
                </div>
            </div>

            <!-- Action Buttons -->
            <div class="filter-actions">
                <button id="searchBtn" class="btn btn-search">
                    <i class="fas fa-search"></i> Search
                </button>
                <button id="clearFiltersBtn" class="btn btn-filter-clear">
                    <i class="fas fa-times-circle"></i> Clear
                </button>
            </div>
        </div>

        <!-- Active Filters Chips Section -->
        <div
            id="filterChipsContainer"
            class="filter-chips-container"
            style="display: none"
        >
            <div class="filter-chips-label">
                <i class="fas fa-filter"></i> Active Filters:
            </div>
            <div id="filterChips" class="filter-chips"></div>
        </div>
    </div>

    <!-- Error message (if any) -->
    {% if error %}
    <div class="error-message">
        <i class="fas fa-exclamation-triangle"></i>
        <span>{{ error }}</span>
    </div>
    {% endif %}

    <!-- Results info -->
    <div class="results-info">
        <span id="resultsText">Showing 0 articles</span>
        <span
            id="filterStatus"
            class="filter-status"
            style="display: none"
        ></span>
    </div>

    <!-- Top Pagination Controls -->
    <div
        id="topPaginationContainer"
        class="pagination-container"
        style="display: none"
    >
        <div class="pagination-info">
            <span id="topPaginationText">Page 1</span>
        </div>
        <div class="pagination-controls">
            <button id="topPrevPageBtn" class="pagination-btn" disabled>
                <i class="fas fa-chevron-left"></i> Previous
            </button>
            <div class="page-numbers" id="topPageNumbers"></div>
            <button id="topNextPageBtn" class="pagination-btn" disabled>
                Next <i class="fas fa-chevron-right"></i>
            </button>
        </div>
    </div>

    <!-- Articles grid -->
    <div id="articleGrid" class="grid">
        {% if articles %} {% for article in articles %}
        <div class="card" data-article-id="{{ article.id }}">
            <div class="card-header">
                <h3 class="card-title">{{ article.title }}</h3>
            </div>
            <div class="card-body">
                <div class="card-meta">
                    <div class="meta-item">
                        <span class="meta-icon"
                            ><i class="fas fa-pen-fancy"></i
                        ></span>
                        <div>
                            <div class="meta-label">Author</div>
                            <div class="meta-value">
                                {{ article.author if article.author else
                                'Unknown' }}
                            </div>
                        </div>
                    </div>
                    <div class="meta-item">
                        <span class="meta-icon"
                            ><i class="fas fa-calendar-alt"></i
                        ></span>
                        <div>
                            <div class="meta-label">Date</div>
                            <div class="meta-value">
                                {{ article.date if article.date else 'Not
                                specified' }}
                            </div>
                        </div>
                    </div>
                    <div class="meta-item">
                        <span class="meta-icon"
                            ><i class="fas fa-globe"></i
                        ></span>
                        <div>
                            <div class="meta-label">Source</div>
                            <div class="meta-value">
                                {{ article.website_url }}
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <div class="card-footer">
                <span class="card-date"
                    ><i class="fas fa-clock"></i> {{ article.date if
                    article.date else 'Recently added' }}</span
                >
                <a
                    href="{{ article.url }}"
                    target="_blank"
                    rel="noopener noreferrer"
                    class="card-link"
                >
                    <i class="fas fa-external-link-alt"></i> Read Article
                </a>
            </div>
        </div>
        {% endfor %} {% else %}
        <div style="grid-column: 1/-1">
            <div class="empty-state">
                <div class="empty-state-icon"><i class="fas fa-inbox"></i></div>
                <div class="empty-state-title">No Articles Yet</div>
                <div class="empty-state-text">
                    Start scraping to collect articles from your favorite
                    sources
                </div>
                <a href="/" class="btn btn-primary"
                    ><i class="fas fa-search"></i> Start Scraping</a
                >
            </div>
        </div>
        {% endif %}
    </div>

    <!-- Loading indicator (hidden by default) -->
    <div id="loadingIndicator" class="loading" style="display: none">
        <div class="spinner"></div>
        <p><i class="fas fa-spinner fa-spin"></i> Loading articles...</p>
    </div>
</div>

<footer class="footer">
    <p>
        <i class="fas fa-copyright"></i> 2025 Multisite Web Scraper. Displaying
        <span id="footerCount">0</span> articles from your collection.
    </p>
</footer>
{% endblock %} {% block extra_js %}
<script src="{{ url_for('static', filename='js/grid.js') }}"></script>
{% endblock %}
