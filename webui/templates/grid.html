{% extends "base.html" %}

{% block title %}Scraped Articles Grid{% endblock %}

{% block extra_css %}
<link rel="stylesheet" href="{{ url_for('static', filename='css/grid.css') }}" />
{% endblock %}

{% block content %}
<div class="navbar">
    <div class="navbar-container">
        <h1 class="navbar-brand">üì∞ Scraped Articles</h1>
        <nav class="nav-links">
            <a href="/">‚Üê Back to Home</a>
            <a href="/grid">Refresh Grid</a>
        </nav>
    </div>
</div>

<div class="container">
    <!-- Header with stats and actions -->
    <div class="header">
        <div>
            <h1>Article Collection</h1>
        </div>
        <div class="header-stats">
            <div class="stat-badge">
                Total: <span id="totalCount">0</span> articles
            </div>
            <div class="stat-badge">
                Authors: <span id="authorCount">0</span>
            </div>
        </div>
        <div class="action-buttons">
            <a href="/" class="btn btn-primary">üîç Scrape More</a>
            <button id="clearAllBtn" class="btn btn-danger">
                üóëÔ∏è Clear All
            </button>
        </div>
    </div>

    <!-- Search and filter section -->
    <div class="search-box">
        <input
            type="text"
            id="searchInput"
            class="search-input"
            placeholder="Search articles by title or author..."
        />
        <div class="filter-controls">
            <button class="filter-btn active" data-filter="all">
                All Articles
            </button>
            <button class="filter-btn" data-filter="recent">
                Recent
            </button>
            <button class="filter-btn" data-filter="today">
                Today
            </button>
        </div>
    </div>

    <!-- Error message (if any) -->
    {% if error %}
    <div class="error-message">‚ö†Ô∏è {{ error }}</div>
    {% endif %}

    <!-- Articles grid -->
    <div id="articleGrid" class="grid">
        {% if articles %}
            {% for article in articles %}
            <div class="card" data-article-id="{{ article.id }}">
                <div class="card-header">
                    <h3 class="card-title">{{ article.title }}</h3>
                </div>
                <div class="card-body">
                    <div class="card-meta">
                        <div class="meta-item">
                            <span class="meta-label">Author:</span>
                            <span class="meta-value">{{ article.author }}</span>
                        </div>
                        <div class="meta-item">
                            <span class="meta-label">Date:</span>
                            <span class="meta-value">{{ article.date }}</span>
                        </div>
                        <div class="meta-item">
                            <span class="meta-label">Website:</span>
                            <span class="meta-value">{{ article.website_url }}</span>
                        </div>
                    </div>
                </div>
</parameter>
<new_text>

                <div class="card-footer">
                    <a href="{{ article.url }}" target="_blank" class="card-link">
                        Read Article ‚Üí
                    </a>
                </div>
            </div>
            {% endfor %}
        {% else %}
        <div style="grid-column: 1/-1">
            <div class="empty-state">
                <div class="empty-state-icon">üìö</div>
                <div class="empty-state-title">No Articles Yet</div>
                <div class="empty-state-text">
                    No scraped articles found. Go back to the home page and start scraping!
                </div>
                <a href="/" class="btn btn-primary">Start Scraping ‚Üí</a>
            </div>
        </div>
        {% endif %}
    </div>

    <!-- Loading indicator (hidden by default) -->
    <div id="loadingIndicator" class="loading" style="display: none">
        <div class="spinner"></div>
        <p style="margin-top: 15px">Loading articles...</p>
    </div>
</div>

<footer class="footer">
    <p></p>
        &copy; 2025 Multisite Web Scraper. Displaying
        <span id="footerCount">0</span> articles.
    </p>
</footer>
{% endblock %}

{% block extra_js %}
<script src="{{ url_for('static', filename='js/grid.js') }}"></script>
{% endblock %}
